<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Publications | Advanced Electronics and Sensor Devices Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body{font-family:'Inter',sans-serif}
        .nav-link-active { color: #2563EB; font-weight: 600; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-200">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-base md:text-lg font-bold text-gray-900 tracking-tight">
                Advanced Electronics & Sensor Devices Lab
            </a>
            <div class="hidden md:flex items-center gap-6 text-gray-600">
                <a href="index.html" class="hover:text-blue-600">Home</a>
                <a href="research.html" class="hover:text-blue-600">Research</a>
                <a href="team.html" class="hover:text-blue-600">Team</a>
                <a href="teaching.html" class="hover:text-blue-600">Teaching</a>
                <a href="publications.html" class="nav-link-active">Publications</a>
                <a href="index.html#news" class="hover:text-blue-600">News</a>
                <a href="index.html#join" class="hover:text-blue-600">Join Us</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden p-2 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"/>
                </svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2">
            <a href="index.html" class="block text-gray-600 hover:text-blue-600">Home</a>
            <a href="research.html" class="block text-gray-600 hover:text-blue-600">Research</a>
            <a href="team.html" class="block text-gray-600 hover:text-blue-600">Team</a>
            <a href="teaching.html" class="block text-gray-600 hover:text-blue-600">Teaching</a>
            <a href="publications.html" class="block text-gray-600 nav-link-active">Publications</a>
            <a href="index.html#news" class="block text-gray-600 hover:text-blue-600">News</a>
            <a href="index.html#join" class="block text-gray-600 hover:text-blue-600">Join Us</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">
        <h1 class="text-4xl md:text-5xl font-black text-gray-900">Publications</h1>
        <p class="mt-4 text-lg text-gray-600 max-w-3xl">
            A comprehensive list of our lab's scholarly articles, peer-reviewed journals, and conference proceedings.
        </p>
        
        <div class="mt-12">
             <div class="flex items-center mb-6">
                <label for="year-filter" class="mr-3 text-sm font-medium text-gray-700">Filter by year:</label>
                <select id="year-filter" class="block w-40 pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"></select>
            </div>
            <div id="publications-container" class="space-y-6">
                <p class="text-gray-500">Loading publications...</p>
            </div>
        </div>
    </main>

    <footer class="bg-gray-900 text-white py-6 mt-16">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; <span id="year"></span> Advanced Electronics & Sensor Devices Lab, Shibaura Institute of Technology.</p>
        </div>
    </footer>

    <script>
        document.getElementById('year').textContent = new Date().getFullYear();
        // Mobile menu script
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        if(mobileMenuButton) mobileMenuButton.addEventListener('click',()=>mobileMenu.classList.toggle('hidden'));
        if(mobileMenu) mobileMenu.querySelectorAll('a').forEach(a=>a.addEventListener('click',()=>mobileMenu.classList.add('hidden')));

        // Publications script
        const container = document.getElementById('publications-container');
        const yearFilter = document.getElementById('year-filter');
        let allPublications = [];

        function renderPublications(pubs) {
            container.innerHTML = ''; // Clear previous content
            if (pubs.length === 0) {
                container.innerHTML = '<p class="text-gray-500">No publications found for the selected year.</p>';
                return;
            }
            pubs.forEach(pub => {
                const el = document.createElement('div');
                // This is where the styling is applied to each publication item
                el.className = 'bg-white p-6 rounded-lg shadow-sm border border-gray-200';
                el.innerHTML = `
                    <p class="text-gray-800">
                        <span class="font-semibold">${pub.authors || ''}</span> (${pub.year || ''}).
                        <span class="font-bold text-gray-900">${pub.title || ''}</span>
                        <em class="text-gray-600">${pub.venue || ''}.</em>
                        ${pub.volume ? ` ${pub.volume}` : ''}${pub.issue ? `(${pub.issue})` : ''}${pub.pages ? `, ${pub.pages}` : ''}.
                    </p>
                    <div class="mt-3 space-x-4 text-sm">
                        ${pub.links?.doi ? `<a href="${pub.links.doi}" target="_blank" class="text-blue-600 font-medium hover:underline">DOI</a>` : ''}
                        ${pub.links?.pdf ? `<a href="${pub.links.pdf}" target="_blank" class="text-blue-600 font-medium hover:underline">PDF</a>` : ''}
                    </div>
                `;
                container.appendChild(el);
            });
        }

        fetch('data/publications.json')
            .then(r => {
                if (!r.ok) throw new Error("Network response was not ok");
                return r.json();
            })
            .then(pubs => {
                allPublications = pubs.sort((a, b) => (b.year || 0) - (a.year || 0));
                
                // Populate year filter
                const years = [...new Set(allPublications.map(p => p.year))].sort((a, b) => b - a);
                yearFilter.innerHTML = '<option value="all">All Years</option>';
                years.forEach(year => {
                    const option = document.createElement('option');
                    option.value = year;
                    option.textContent = year;
                    yearFilter.appendChild(option);
                });

                renderPublications(allPublications);
            })
            .catch(error => {
                console.error('Error loading publications:', error);
                container.innerHTML = '<p class="text-red-500">Could not load publications data.</p>';
            });

        yearFilter.addEventListener('change', (event) => {
            const selectedYear = event.target.value;
            if (selectedYear === 'all') {
                renderPublications(allPublications);
            } else {
                const filteredPubs = allPublications.filter(p => p.year.toString() === selectedYear);
                renderPublications(filteredPubs);
            }
        });
    </script>
</body>
</html>
